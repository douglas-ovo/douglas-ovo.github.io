---
title: js静态模块打包器
categories:
  - 前端学习
tags:
  - webpack
  - Rollup
  - vite
date: 2022-07-15 11:13:53
index_img: https://www.webpackjs.com/32dc115fbfd1340f919f0234725c6fb4.png
---

## webpack
### 什么是webpack
1. webpack 是一种前端资源构建工具，一个静态资源打包器
2. 浏览器中不能直接识别工程化项目中的less(通过loader编译)、esmodule(可直接编译)等语法，webpack这些编译成浏览器可以直接识别的语法

### webpack的作用
1. 模块化：
>帮助我们自动处理模块之间的依赖关系（包括嵌套依赖，只用打包main.js,main依赖的其他模块它会自动处理），不仅仅是js文件，css、图片、json文件等都可以被当作模块来使用
2. 打包：
>将webpack中的各种资源模块进行打包合并成一个或多个包（bundle），打包过程对资源进行处理，比如压缩图片、sass转成css、es6转es5，ts转js等操作

### 项目结构
>webpack依赖node环境，node环境为了能正常执行很多代码，必须包含各种依赖包，需要npm（包管理工具）
>
>src源码;dist为打包后的文件配置到服务器即可
>
>package.json scirpts 项中的使用  
>npm run + 指令 即可执行对应指令后面的命令，但是和直接执行不一样的地方在于会优先找本地安装的对应命令的包（不是-g安装的）若没找到则使用全局安装的包
>在终端（cmd窗口、本地终端）中使用webpack会找全局安装的包
>
>loader(转换器)：js代码webpack会自动处理，css、图片、es6、ts、.jsx、.vue等高级的东西webpack本身是不支持转化的，则需要给webpack扩展对应的loader
>通过npm安装需要使用的loader，在webpack.config.js中的module关键字下进行配置
>
>入口文件放最外层，功能相关的文件放相应的文件夹中
>
>plugin(扩展器)：对webpack本身进行扩展，如打包优化、文件压缩等
>npm安装需要使用的plugin(某些webpack内置的插件不需要安装),在webpack配置plugins项
>
>webpack真实打包 是将有依赖的js文件，当成数组元素最终形成一个数组做为执行函数_webpack_require_的实参

### vue-webpack
vue有两种版本
runtime-only：代码中不可以有任何的template;
runtime-compiler,可以有template，compiler可以用于编译template

---
官方文档：[webpackjs](https://www.webpackjs.com/concepts/)

参考视频：[BV1e7411j7T5](https://www.bilibili.com/video/BV1e7411j7T5?spm_id_from=333.999.0.0)   [BV1cv411C74F](https://www.bilibili.com/video/BV1cv411C74F?spm_id_from=333.999.0.0)   [BV17j411f74d](https://www.bilibili.com/video/BV17j411f74d?spm_id_from=333.999.0.0)


## Rollup
1. Rollup 是一款 ES Modules 打包器，从作用上来看，Rollup 与 Webpack 非常类似。不过相比于 Webpack，Rollup要小巧的多，打包生成的文件更小。（识别commonJs需要插件）
2. 热更新：Rollup不支持HMR，在对js以外的模块的支持上不如webpack，但是如果是打包纯js库例如react，前期的vue的话，使用rollup是很合适的，打包的产物比较干净，没有webpack那么多工具函数
3. Rollup 的插件机制设计得相对更干净简洁，单个模块的 resolve / load / transform 跟打包环节完全解耦，所以 Vite 才能在开发时模拟 Rollup 的插件机制，并且兼容大部分 Rollup 插件
4. rollup原生支持tree-shaking

---
官方文档：[rollupjs](https://www.rollupjs.com/)


## Vite
1. 一个开发服务器，它基于 原生 ES 模块 提供了丰富的内建功能，如速度很快的 【模块热更新HMR】
2. 一套构建指令，它使用 Rollup打包你的代码，并且它是预配置的，可以输出用于生产环境的优化过的静态资源
3. 快速的冷启动：vite会直接启动开发服务器，不需要进行打包操作，所以不需要分析模块的依赖、不需要编译，因此启动速度非常快
即时的模块热更新
4. 真正的按需编译：利用现代浏览器支持ES Module的特性，当浏览器请求某个模块的时候，再根据需要对模块的内容进行编译，这种方式大大缩短了编译时间
Rollup 是一款 ES Modules 打包器，从作用上来看，Rollup 与 Webpack 非常类似。不过相比于 Webpack，Rollup要小巧的多，打包生成的文件更小。（识别commonJs需要插件）
热更新：Rollup不支持HMR，在对js以外的模块的支持上不如webpack，但是如果是打包纯js库例如react，前期的vue的话，使用rollup是很合适的，打包的产物比较干净，没有webpack那么多工具函数
Rollup 的插件机制设计得相对更干净简洁，单个模块的 resolve / load / transform 跟打包环节完全解耦，所以 Vite 才能在开发时模拟 Rollup 的插件机制，并且兼容大部分 Rollup 插件
rollup原生支持tree-shaking

---
官方文档：[vitejs](https://cn.vitejs.dev/)
参考博客：[csdn_qq_41968486](https://blog.csdn.net/qq_41968486/article/details/125450518)