---
title: 搜索-关键词高亮
categories:
  - 前端学习
tags:
  - 关键词高亮
date: 2023-03-13 22:35:52
index_img: https://img1.baidu.com/it/u=1428937669,3877749093&fm=253&fmt=auto&app=138&f=PNG?w=587&h=262
---

### 效果

<img src="/img/sample/a021/a021.gif" alt="">

### 代码部分

**App.jsx**

```javascript
import React, { Component } from 'react';
import './assets/index.less'

function debounce(fn, delay, ...arg) {
  let timer = null
  return function () {
    clearTimeout(timer)
    timer = setTimeout(() => {
      fn.apply(this, arg)
    }, delay)
  }
}

class App extends Component {
  state = {
    keyWord: '',
    matchList: []
  }
  getData = debounce(() => {
    const { keyWord } = this.state

    keyWord.trim() &&
      fetch(`https://api.github.com/search/users?q=${keyWord}`,
        {
          method: 'get',
          headers: {
            'Content-Type': 'application/json'
          }
        }
      ).then(res => res.json()).then(ress => {
        this.setState({ matchList: ress.items }, () => {
          this.hightLight()
        })
      })
  }, 200)

  hightLight = () => {
    const { keyWord, matchList } = this.state
    matchList.forEach((item) => {
      item["name-highlights"] =
        item.login.replace(
          new RegExp(keyWord, "ig"),
          (match) => '<span style="color:#0EDC9B">' + match + "</span>")
    });
    this.setState({ matchList: [...matchList] })
  }

  render() {
    const { matchList } = this.state

    return (
      <div className='app'>
        <div className='header'>
          <input
            type="text"
            placeholder='请输入github用户名'
            onInput={(evt) => {
              this.setState({ keyWord: evt.target.value },
                () => this.getData())
            }} />
        </div>
        <div className='list'>
          {
            matchList && matchList.map(item =>
              <div className='list-item' key={item.id}>
                <img src={item.avatar_url} alt="" />
                {item["name-highlights"] ?
                  <div dangerouslySetInnerHTML={{ __html: item["name-highlights"] }}></div> :
                  <span>{item.login}</span>}
              </div>)
          }
        </div>
      </div>
    );
  }
}

export default App;

```

**index.less**

```less
* {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}

html,
body,
#root {
    height: 100%;
}

.app {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;

    .list {
        flex: 1;
        overflow-y: scroll;
        display: flex;
        flex-direction: column;
        padding: 1em 0;

        .list-item {
            padding: .5em 1em;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #ccc;

            img {
                width: 5em;
                height: 5em;
                border-radius: 50%;
                margin-right: 1em;
            }
        }
    }
}

input[type="text"] {
    width: 100%;
    height: 3em;
}
```
