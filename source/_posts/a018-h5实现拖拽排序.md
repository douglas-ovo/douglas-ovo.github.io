---
title: h5实现拖拽排序
categories:
  - 前端学习
tags:
  - 拖拽排序
  - sortablejs
date: 2022-12-08 15:16:37
index_img: https://img1.itxst.com/3/9/39f59bba144ad3fbb463299294c6d27b.png
---

### 效果

<img src="/img/sample/a018/sortable.gif">

### 依赖版本

1. package.json

```json
    "sortablejs": "^1.15.0",
    "vue": "^3.2.41"
```

### html 部分

```html
<template>
  <div class="wrapper">
    <div class="container">
      <div
        class="item"
        v-for="(item, index) in items"
        :key="item.id"
        :style="{ background: item.color }"
        :data-id="item.id"
      >
        {{ item }}
      </div>
    </div>
  </div>
</template>
```

### js 部分

```javascript
<script setup lang="ts">
import { ref, onMounted } from 'vue'
import Sortable from 'sortablejs';
const items = ref([
  { id: 1, color: "#3883a0" },
  { id: 2, color: "#4883a0" },
  { id: 3, color: "#5883a0" },
  { id: 4, color: "#6883a0" },
  { id: 5, color: "#7883a0" },
  { id: 6, color: "#8883a0" },
  { id: 7, color: "#9883a0" }
])

const sort = ref<any[]>([])

onMounted(() => {
  let el = document.querySelector('.container')
  Sortable.create(<HTMLElement>el, {
    animation: 150,
    onStart() {
      sort.value = []
    },
    onEnd() {
      Array.from((document.querySelector('.container') as any).children).forEach((item: any) => {
        sort.value.push(item.dataset.id)
      })
      console.log(JSON.parse(JSON.stringify(sort.value)));
    }
  })
})
</script>
```

### css 部分

```css
<style lang="less" scoped>
.container {
  display: flex;
  flex-wrap: wrap;
}

.item {
  width: 100px;
  height: 100px;
  margin: 10px;
}
</style>
```
